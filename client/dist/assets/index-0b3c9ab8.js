(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function c(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=c(e);fetch(e.href,t)}})();const u="BAX9ziaLXliBDsKmbn7HCYpZFcSe-I-mbw_VDkQUH2pTvyUFYUFeYNy5EIa0IYUfvVlnmpaVr9xFQYQPY3MF9uk",i=document.querySelector(".os"),l=document.querySelector(".support"),d=navigator.userAgent,f=/(iPad|iPhone|iPod)/i.test(d),s=navigator.platform;s.indexOf("Win")!==-1&&(i.textContent="Windows");s.indexOf("Mac")!==-1&&(i.textContent="macOS");s.indexOf("Linux")!==-1&&(i.textContent="Linux");f&&(i.textContent="iOS");"PushManager"in window?(console.log("Web push is supported!"),l.textContent="Поддерживается"):l.textContent="Не поддерживается";console.log(s);Notification.requestPermission().then(r=>{r==="granted"&&console.log("Permission granted")});"serviceWorker"in navigator?navigator.serviceWorker.register("sw.js").then(r=>{console.log("Service Worker registered"),r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:p(u)}).then(o=>{console.log("Subscribed to push notifications:",o),fetch("http://localhost:3000/subscribe",{method:"POST",body:JSON.stringify(o),headers:{"content-type":"application/json"}})}).catch(o=>{console.error("Failed to subscribe to push notifications:",o)})}).catch(r=>{console.error("Service Worker registration failed:",r)}):console.warn("Service Workers are not supported");function p(r){const o="=".repeat((4-r.length%4)%4),c=(r+o).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(c),e=new Uint8Array(n.length);for(let t=0;t<n.length;++t)e[t]=n.charCodeAt(t);return e}
